"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/js/",i(i.s=6)}([function(e,t,n){var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"bind",value:function(){}},{key:"render",value:function(){var e=document.createElement("div");return e.innerHTML=this.template,e.firstElementChild}},{key:"template",get:function(){throw new Error("Template is required")}},{key:"element",get:function(){return this._element||(this._element=this.render(),this.bind()),this._element}}]),e}();t.a=r},function(e,t,n){var o=n(3),r=n(15),i=n(17),s=n(25),a=n(28),u=n(5),c=n(30),l=[],f=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"showWelcome",value:function(){var e=new r.a;Object(o.a)(e.element)}},{key:"startTest",value:function(){var t=this;u.a.loadQuestions().then(function(e){var t=e.questionsData,n=e.timeData;return l=t,n}).then(function(e){var t=new c.a(l,e);new i.a(t).start()}).catch(function(e){alert(e+"\n          Попробуйте ещё раз!"),t.showWelcome()})}},{key:"showForm",value:function(e){var t=e.answers,n=e.status,r=new s.a({answers:t,status:n});Object(o.a)(r.element)}},{key:"showEnd",value:function(e){var t=e.text,n=e.score,r=e.link,i=new a.a({text:t,score:n,link:r});Object(o.a)(i.element)}}]),e}();t.a=f},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(n=window)}e.exports=n},function(e,t,n){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.querySelector(".app");t.innerHTML="",t.appendChild(e)}function i(e,t){var n=e%100;return 5<=n&&n<=20?t[2]:1===(n%=10)?t[0]:2<=n&&n<=4?t[1]:t[2]}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},function(e,t,n){t.a=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}},function(e,t,n){var r=n(27),i="json/questions_server.json",o=function(e){if(e.ok)return e;throw new Error(e.status+": "+e.statusText)},s=function(e){return e.json()},a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"loadQuestions",value:function(){return fetch(i,{method:"GET"}).then(o).then(s).then(function(e){return Object(r.a)(e)})}},{key:"sendAnswers",value:function(e){var t={body:JSON.stringify(e),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(i+"/getResult",t).then(o).then(s)}}]),e}();t.a=a},function(e,t,n){e.exports=n(7)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});n(8);n(1).a.showWelcome();var r=document.querySelector("script");r&&r.parentNode.removeChild(r)},function(e,t,n){var r,u,i,c,o,s;n(9),n(10);Array.from||(Array.from=(r=Object.prototype.toString,u=function(e){return"function"==typeof e||"[object Function]"===r.call(e)},i=Math.pow(2,53)-1,c=function(e){var t,n=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(n,0),i)},function(e){var t=Object(e);if(null===e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n=1<(arguments.length<=1?0:arguments.length-1)?arguments.length<=2?void 0:arguments[2]:void 0,r=void 0;if(void 0!==n){if(!u(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<(arguments.length<=1?0:arguments.length-1)&&(r=arguments.length<=3?void 0:arguments[3])}for(var i=c(t.length),o=u(this)?Object(new this(i)):new Array(i),s=0,a=void 0;s<i;)a=t[s],o[s]=n?void 0===r?n(a,s):n.call(r,a,s):a,s+=1;return o.length=i,o})),o=Element.prototype,s=o.matches||o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector,o.matches=o.matchesSelector=s||function(e){var t=document.querySelectorAll(e),n=this;return Array.prototype.some.call(t,function(e){return e===n})},Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})},function(e,t,n){var r="URLSearchParams"in self,i="Symbol"in self&&"iterator"in Symbol,a="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in self,s="ArrayBuffer"in self;if(s)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&-1<u.indexOf(Object.prototype.toString.call(e))};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function _(t){this.map={},t instanceof _?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function p(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=m(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}_.prototype.append=function(e,t){e=l(e),t=f(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},_.prototype.delete=function(e){delete this.map[l(e)]},_.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},_.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},_.prototype.set=function(e,t){this.map[l(e)]=f(t)},_.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},_.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),h(n)},_.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),h(t)},_.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),h(n)},i&&(_.prototype[Symbol.iterator]=_.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var n,r,i=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new _(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new _(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),-1<b.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(e){var i=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function k(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new _(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var q=[301,302,303,307,308];k.redirect=function(e,t){if(-1===q.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})};var x=self.DOMException;try{new x}catch(e){(x=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function T(i,s){return new Promise(function(r,e){var t=new w(i,s);if(t.signal&&t.signal.aborted)return e(new x("Aborted","AbortError"));var o=new XMLHttpRequest;function n(){o.abort()}o.onload=function(){var e,i,t={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",i=new _,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();i.append(n,r)}}),i)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new k(n,t))},o.onerror=function(){e(new TypeError("Network request failed"))},o.ontimeout=function(){e(new TypeError("Network request failed"))},o.onabort=function(){e(new x("Aborted","AbortError"))},o.open(t.method,t.url,!0),"include"===t.credentials?o.withCredentials=!0:"omit"===t.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",n),o.onreadystatechange=function(){4===o.readyState&&t.signal.removeEventListener("abort",n)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})}T.polyfill=!0,self.fetch||(self.fetch=T,self.Headers=_,self.Request=w,self.Response=k)},function(e,t,i){(function(e){var t=i(11),n=i(4),r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"Promise"in r?r.Promise.prototype.finally||(r.Promise.prototype.finally=n.a):r.Promise=t.a}).call(t,i(2))},function(e,f,h){(function(t){var e=h(4),n=setTimeout;function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function i(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e=1===n._state?r.onFulfilled:r.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void a(r.promise,e)}s(r.promise,t)}else(1===n._state?s:a)(r.promise,n._value)})):n._deferreds.push(r)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){a(t,e)}var r,i}function a(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return i(this,new c(e,t,n)),n},o.prototype.finally=e.a,o.all=function(t){return new o(function(r,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return r([]);var s=o.length;function a(t,e){try{if(e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){a(t,e)},i)}o[t]=e,0==--s&&r(o)}catch(e){i(e)}}for(var e=0;e<o.length;e++)a(e,o[e])})},o.resolve=function(t){return t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(i){return new o(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},f.a=o}).call(f,h(12).setImmediate)},function(e,i,o){(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}i.setTimeout=function(){return new r(n.call(setTimeout,t,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,t,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(t,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},o(13),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(i,o(2))},function(e,t,n){(function(e,d){!function(n,r){if(!n.setImmediate){var i,o,t,s,e,a=1,u={},c=!1,l=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,i="[object process]"==={}.toString.call(n.process)?function(e){d.nextTick(function(){_(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(s="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(s)&&_(+e.data.slice(s.length))},n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),function(e){n.postMessage(s+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){_(e.data)},function(e){t.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){_(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):function(e){setTimeout(_,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[a]=r,i(a),a++},f.clearImmediate=h}function h(e){delete u[e]}function _(e){if(c)setTimeout(_,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(14))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&_())}function _(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||a(_)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(16),i=n(1),o=function(){function e(){_classCallCheck(this,e),this._view=new r.a,this._view.onStartTest=function(){i.a.startTest()}}return _createClass(e,[{key:"element",get:function(){return this._view.element}}]),e}();t.a=o},function(e,t,n){var r=n(0),i=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,r["a"]),_createClass(t,[{key:"bind",value:function(){var e=this,t=this._element.querySelector(".welcome__start");t.onclick=function(){t.disabled=!0,t.textContent="Загрузка...",e.onStartTest()}}},{key:"onStartTest",value:function(){}},{key:"template",get:function(){return'\n      <div class="container">\n        <div class="welcome">\n          <div class="welcome__wrapper">\n            <div class="decoration"></div>\n            <div class="logo">\n              <a href="http://miretno.ru/" class="logo__link" target="_blank">\n                <svg class="logo__img" width="148" height="144" aria-label="Логотип" role="img">\n                  <use xlink:href="#logo"/>\n                </svg>\n              </a>\n              <p class="logo__text">Большой этнографический диктант</p>\n            </div>\n\n            <p class="welcome__text">Участниками Диктанта могут стать жители России и зарубежных стран, владеющие русским языком, независимо от образования, социальной принадлежности, вероисповедания и гражданства.\n            </p>\n\n            <button class="welcome__start">Пройти тестирование</button>\n          </div>\n        </div>\n      </div>'}}]),t}();t.a=i},function(e,t,n){var r=n(1),i=n(3),o=n(18),s=n(19),a=n(20),u=n(21),c=n(22),l=n(23),f=n(24);var h={checkbox:function(e){var t=e.question,n=e.number,r=e.context,i=new u.a(t,n+1);return i.onFormSubmit=function(e){r._model.setAnswer(e,r._questionNumber),r._questionNumber=r._model.getNextQuestion(r._questionNumber+1),r.showQuestion(),r._navView.setCompleteItem(n)},i},radio:function(e){var t=e.question,n=e.number,r=e.context,i=new c.a(t,n+1);return i.onFormSubmit=function(e){r._model.setAnswer(e,r._questionNumber),r._questionNumber=r._model.getNextQuestion(r._questionNumber+1),r.showQuestion(),r._navView.setCompleteItem(n)},i},text:function(e){var t=e.question,n=e.number,r=e.context,i=new l.a(t,n+1);return i.onFormSubmit=function(e){r._model.setAnswer(e,r._questionNumber),r._questionNumber=r._model.getNextQuestion(r._questionNumber+1),r.showQuestion(),r._navView.setCompleteItem(n)},i},matching:function(e){var t=e.question,n=e.number,r=e.context,i=new f.a(t,n+1);return i.onFormSubmit=function(e){r._model.setAnswer(e,r._questionNumber),r._questionNumber=r._model.getNextQuestion(r._questionNumber+1),r.showQuestion(),r._navView.setCompleteItem(n)},i}},_=function(){function t(e){_classCallCheck(this,t),this._model=e,this._timer=Object(o.a)(this._model.time),this._questionNumber=0}return _createClass(t,[{key:"start",value:function(){var e=this;this._view=new s.a(this._timer),this._initNav(),Object(i.a)(this._view.element),Object(i.a)(this._navView.element,this._view.getNavContainer()),this.startTimer(),this.showQuestion(),this._view.showPrevQuestion=function(){e._questionNumber=e._model.getPrevQuestion(e._questionNumber-1),e.showQuestion()},this._view.showNextQuestion=function(){e._questionNumber=e._model.getNextQuestion(e._questionNumber+1),e.showQuestion()},this._view.exitTest=function(){e.stopTimer(),e.showForm("STOP")}}},{key:"startTimer",value:function(){var t=this;this._timerId=setTimeout(function(){var e=t._timer.tick().done;t._model.time=t._timer.time,e&&(t.stopTimer(),t.showForm("FAIL_TIME")),t.startTimer()},1e3)}},{key:"stopTimer",value:function(){this._timerId&&clearTimeout(this._timerId)}},{key:"_initNav",value:function(){var t=this;this._navView=new a.a(this._model._questions),this._navView.onNavClick=function(e){t._questionNumber=e,t.showQuestion()}}},{key:"showQuestion",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._questionNumber,t=this._model.getQuestion(e);if(t){var n=h[t.type]({question:t,number:e,context:this});this._navView.setActiveItem(e),Object(i.a)(n.element,this._view.getQuestionContainer())}else this._model.isComplete()?(this.stopTimer(),this.showForm("COMPLETE")):(this._questionNumber=this._model.getNextQuestion(),this.showQuestion())}},{key:"showForm",value:function(e){r.a.showForm({answers:this._model.answers,status:e})}}]),t}();t.a=_},function(e,t,n){t.a=function(e){return{time:e,tick:function(){return this.time--,this.ontick(),{done:0===this.time}},getCompletionLeft:function(){return 1-this.time/e},ontick:function(){}}}},function(e,t,n){var r=n(0),i=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._timer=e,t._minutesRemains=~~(t._timer.time/60),t._secondsRemains=t._timer.time%60,t._secondsRemains<10&&(t._secondsRemains="0"+t._secondsRemains),t}return _inherits(n,r["a"]),_createClass(n,[{key:"bind",value:function(){var t=this,n=this._element.querySelector(".timer__mins"),r=this._element.querySelector(".timer__secs");this._timer.ontick=function(){n.textContent=~~(t._timer.time/60);var e=t._timer.time%60;e<10&&(e="0"+e),r.textContent=e};var e=this._element.querySelector(".test__control"),i=this._element.querySelector(".test__control.test__control--next");e.onclick=function(){t.showPrevQuestion()},i.onclick=function(){t.showNextQuestion()};var o=this._element.querySelector(".test__end"),s=this._element.querySelector(".popup"),a=s.querySelector(".popup__control--confirm"),u=s.querySelector(".popup__control--reject");s.addEventListener("click",function(e){e.target===s&&s.classList.remove("popup--show")}),o.onclick=function(){s.classList.add("popup--show")},a.onclick=function(){t.exitTest()},u.onclick=function(){s.classList.remove("popup--show")}}},{key:"getQuestionContainer",value:function(){return this._element.querySelector(".test__question")}},{key:"getNavContainer",value:function(){return this._element.querySelector(".test__navigation")}},{key:"showPrevQuestion",value:function(){}},{key:"showNextQuestion",value:function(){}},{key:"exitTest",value:function(){}},{key:"template",get:function(){return'\n      <div class="content">\n        <div class="decoration"></div>\n        <div class="container">\n          <div class="test">\n            <header class="page-header">\n              <div class="logo">\n                <a href="http://miretno.ru/" class="logo__link" target="_blank">\n                  <svg class="logo__img" width="92" height="90" aria-hidden="true" role="presentation">\n                    <use xlink:href="#logo"/>\n                  </svg>\n                </a>\n                <p class="logo__text">Большой этнографический диктант</p>\n              </div>\n\n              <div class="timer">\n                <svg class="timer__icon" width="77" height="90" aria-hidden="true" role="presentation">\n                  <use xlink:href="#icon_timer"/>\n                </svg>\n                <p class="timer__header">До конца теста осталось:</p>\n                <p class="timer__value">\n                  <span class="timer__mins">'+this._minutesRemains+'</span>\n                  :\n                  <span class="timer__secs">'+this._secondsRemains+'</span>\n                </p>\n              </div>\n\n              <button class="test__end">\n                Завершить тестирование\n\n                <svg class="test__end-icon" width="32" height="32" aria-hidden="true" role="presentation">\n                  <use xlink:href="#icon_finish"/>\n                </svg>\n              </button>\n            </header>\n\n            <div class="test__content">\n              <div class="test__navigation"></div>\n              <div class="test__question"></div>\n              <div class="test__controls">\n                <button class="test__control">\n                  Назад\n                  <svg class="test__control-icon" width="16" height="16" aria-hidden="true" role="presentation">\n                    <use xlink:href="#icon_arrow"/>\n                  </svg>\n                </button>\n                <button class="test__control test__control--next">\n                  Далее\n                  <svg class="test__control-icon" width="16" height="16" aria-hidden="true" role="presentation">\n                    <use xlink:href="#icon_arrow"/>\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="popup">\n          <div class="popup__content">\n            <p class="popup__text">У вас остались вопросы без ответа. Завершить тестирование?</p>\n\n            <div class="popup__controls">\n              <button class="popup__control popup__control--confirm">Да</button>\n              <button class="popup__control popup__control--reject">Нет</button>\n            </div>\n          </div>\n        </div>\n      </div>'}}]),n}();t.a=i},function(e,t,n){var r=n(0),s="navigation__link--active",i="navigation__link--complete",o=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._questions=e,t}return _inherits(n,r["a"]),_createClass(n,[{key:"bind",value:function(){var n=this;this._element.querySelector(".navigation__list").addEventListener("click",function(e){var t=e.target.classList;t.contains("navigation__link")&&(e.preventDefault(),t.contains(s)||t.contains(i)||n.onNavClick(+e.target.getAttribute("data-question")))})}},{key:"onNavClick",value:function(){}},{key:"setActiveItem",value:function(e){var t=this._element.querySelector(".navigation__list"),n=t.querySelector("."+s);n&&n.classList.remove(s);var r=t.querySelectorAll(".navigation__link")[e];if(r){r.classList.add(s);var i=r.offsetLeft,o=(r.offsetWidth,t.offsetWidth/2);parseInt(getComputedStyle(r).marginLeft);t.scrollLeft=i-o}}},{key:"setCompleteItem",value:function(e){var t=this._element.querySelector(".navigation__list").querySelectorAll(".navigation__link")[e];t&&t.classList.add(i)}},{key:"template",get:function(){return'\n      <div class="navigation">\n        <ul class="navigation__list">\n          '+this._questions.map(function(e,t){return'<li class="navigation__item">\n              <a href="#" class="navigation__link" data-question="'+t+'">'+(t+1)+"</a>\n            </li>"}).join("")+"\n        </ul>\n      </div>"}}]),n}();t.a=o},function(e,t,n){var r=n(0),i=function(e){function a(e,t){var n=e.task,r=e.image,i=e.answers,o=e.topic;_classCallCheck(this,a);var s=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return s._task=n,s._answers=i,s._img=r?"<img src="+r+' class="question__img">':"",s._number=t,s._topic=o,s}return _inherits(a,r["a"]),_createClass(a,[{key:"bind",value:function(){var n=this,e=this._element.querySelector(".answers"),r=Array.from(e.querySelectorAll(".answers__input")),t=e.querySelector(".answers__submit");e.onchange=function(){t.disabled=!r.some(function(e){return e.checked})},e.onsubmit=function(e){e.preventDefault();var t=r.filter(function(e){return e.checked}).map(function(e){return e.value});n.onFormSubmit(t)}}},{key:"onFormSubmit",value:function(){}},{key:"template",get:function(){return'\n      <div class="question">\n        <p class="question__topic">'+this._topic+'</p>\n        <p class="question__number">Вопрос №'+this._number+'</p>\n        <h1 class="question__text">'+this._task+"</h1>\n        "+this._img+'\n\n        <form class="answers">\n          <ul class="answers__list">\n            '+this._answers.map(function(e){return'<li class="answers__item">\n              <input class="answers__input visually-hidden" type="checkbox" name="answer[]" value="'+e.id+'" id="answer-'+e.id+'">\n              <label class="answers__label answers__label--checkbox" for="answer-'+e.id+'">'+e.text+"</label>\n            </li>"}).join("")+'\n          </ul>\n\n          <button type="submit" class="answers__submit" disabled>Ответить</button>\n        </form>\n      </div>'}}]),a}();t.a=i},function(e,t,n){var r=n(0),i=function(e){function a(e,t){var n=e.task,r=e.image,i=e.answers,o=e.topic;_classCallCheck(this,a);var s=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return s._task=n,s._answers=i,s._img=r?"<img src="+r+' class="question__img">':"",s._number=t,s._topic=o,s}return _inherits(a,r["a"]),_createClass(a,[{key:"bind",value:function(){var t=this,n=this._element.querySelector(".answers"),e=Array.from(n.querySelectorAll(".answers__input")),r=n.querySelector(".answers__submit");n.onchange=function(){r.disabled=!e.some(function(e){return e.checked})},n.onsubmit=function(e){e.preventDefault(),t.onFormSubmit(n.querySelector(".answers__input:checked").value)}}},{key:"onFormSubmit",value:function(){}},{key:"template",get:function(){return'\n      <div class="question">\n        <p class="question__topic">'+this._topic+'</p>\n        <p class="question__number">Вопрос №'+this._number+'</p>\n        <h1 class="question__text">'+this._task+"</h1>\n        "+this._img+'\n\n        <form class="answers">\n          <ul class="answers__list">\n            '+this._answers.map(function(e){return'<li class="answers__item">\n              <input class="answers__input visually-hidden" name="answer" type="radio" name="answer[]" value="'+e.id+'" id="answer-'+e.id+'">\n              <label class="answers__label answers__label--radio" for="answer-'+e.id+'">'+e.text+"</label>\n            </li>"}).join("")+'\n          </ul>\n\n          <button type="submit" class="answers__submit" disabled>Ответить</button>\n        </form>\n      </div>'}}]),a}();t.a=i},function(e,t,n){var r=n(0),i=function(e){function i(e,t){var n=e.task;_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return r._task=n,r._number=t,r}return _inherits(i,r["a"]),_createClass(i,[{key:"bind",value:function(){var t=this,e=this._element.querySelector(".answers"),n=e.querySelector(".answers__textarea"),r=e.querySelector(".answers__submit");n.oninput=function(){r.disabled=""===n.value},e.onsubmit=function(e){e.preventDefault(),t.onFormSubmit(n.value)}}},{key:"onFormSubmit",value:function(){}},{key:"template",get:function(){return'\n      <div class="question">\n        <p class="question__number">Вопрос №'+this._number+'</p>\n        <h1 class="question__text">'+this._task+'</h1>\n\n        <form class="answers">\n          <textarea name="answer" class="answers__textarea" placeholder="Ваш ответ"></textarea>\n\n          <button type="submit" class="answers__submit" disabled>Ответить</button>\n        </form>\n      </div>'}}]),i}();t.a=i},function(e,t,n){var r=n(0),i=function(e){function o(e,t){var n=e.task,r=e.answers;_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i._task=n,i._answers=r,i._number=t,i}return _inherits(o,r["a"]),_createClass(o,[{key:"bind",value:function(){var n=this,e=this._element.querySelector(".answers"),r=Array.from(e.querySelectorAll(".answers__select")),t=e.querySelector(".answers__submit");e.onchange=function(e){e.target.classList.remove("answers__select--unselect"),t.disabled=!r.every(function(e){return!e.classList.contains("answers__select--unselect")&&"0"!==e.value})},e.onsubmit=function(e){e.preventDefault();var t=[];r.forEach(function(e){t.push([e.id,e.value])}),n.onFormSubmit(t)}}},{key:"onFormSubmit",value:function(){}},{key:"template",get:function(){var t=this;return'\n      <div class="question">\n        <p class="question__number">Вопрос №'+this._number+'</p>\n        <h1 class="question__text">'+this._task+'</h1>\n\n        <form class="answers">\n          <ul class="answers__list">\n            '+this._answers.matching_list.map(function(e){return'<li class="answers__item answers__item--matching">\n              <p class="question__text question__text--matching">'+e.text+'</p>\n              <select name="matching-'+e.id+'" id="'+e.id+'" class="answers__select answers__select--unselect">\n                <option value="0" hidden class="answers__option">Выберите</option>\n                '+t._answers.matching_answers.map(function(e){return'<option value="'+e.id+'" class="answers__option">'+e.text+"</option>"}).join("")+"\n              </select>\n            </li>"}).join("")+'\n          </ul>\n\n          <button type="submit" class="answers__submit" disabled>Ответить</button>\n        </form>\n      </div>'}}]),o}();t.a=i},function(e,t,n){var o=n(26),s=n(1),a=n(5),r=function(){function i(e){var r=this,t=e.answers,n=e.status;_classCallCheck(this,i),this._view=new o.a(n),this._view.onFormSubmit=function(e){e.answers=t,a.a.sendAnswers(e).then(function(e){var t=e.response;if("success"===t.status){try{window.yaCounter50957903.reachGoal("SAVE_RESULT")}catch(e){}s.a.showEnd({text:t.message,score:t.total_points,link:t.link_certificate})}else{for(var n in t.errors)({}).hasOwnProperty.call(t.errors,n)&&r._view.setError({inputId:n,errors:t.errors[n]});r._view.changeSubmitText({text:"Сохранить результат",disabled:!0})}}).catch(function(e){alert(e+"... Попробуйте ещё раз!")}).finally(r._view.changeSubmitText({text:"Сохранить результат",disabled:!1}))}}return _createClass(i,[{key:"element",get:function(){return this._view.element}}]),i}();t.a=r},function(e,t,n){var r=n(0),i={COMPLETE:"Вы завершили тест!",FAIL_TIME:"Увы... Время вышло",STOP:"Вы остановили выполнение теста"},o=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"COMPLETE";_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._headerText=i[e],t}return _inherits(n,r["a"]),_createClass(n,[{key:"bind",value:function(){var n=this,e=this._element.querySelector(".form"),r=Array.from(e.querySelectorAll(".form__input")),i=e.querySelector(".form__submit"),o=e.querySelector("#agreement");o.onchange=function(){i.disabled=!r.every(function(e){return""!==e.value})||!o.checked},e.oninput=function(e){var t=e.target.closest(".form__item");t&&t.classList.remove("form__item--error"),i.disabled=!r.every(function(e){return""!==e.value})||!o.checked},e.onsubmit=function(e){e.preventDefault();var t={};r.forEach(function(e){t[e.name]=e.value}),n.onFormSubmit(t),n.changeSubmitText({text:"Отправка...",disabled:!0})}}},{key:"changeSubmitText",value:function(e){var t=e.text,n=void 0===t?"Сохранить результат":t,r=e.disabled,i=void 0===r||r,o=this._element.querySelector(".form__submit");o.textContent=n,o.disabled=i}},{key:"onFormSubmit",value:function(){}},{key:"setError",value:function(e){var t=e.inputId,n=e.errors,r=void 0===n?[]:n,i=this._element.querySelector("#"+t);if(i){var o=i.closest(".form__item");o.classList.add("form__item--error"),o.setAttribute("data-error",r.join(" "))}}},{key:"template",get:function(){return'\n      <div class="container">\n        <div class="form">\n          <p class="form__header">'+this._headerText+'</p>\n\n          <form action="#" class="form__form">\n            <p class="form__description">Для того, чтобы сохранить ваш результат, пожалуйста введите:</p>\n            <div class="form__item">\n              <label for="email" class="form__label visually-hidden">E-mail</label>\n              <input class="form__input" type="email" id="email" name="email" placeholder="E-mail*" required autofocus />\n            </div>\n            <div class="form__item">\n              <label for="surname" class="form__label visually-hidden">Фамилия</label>\n              <input class="form__input" type="text" id="surname" name="last_name" placeholder="Фамилия*" required />\n            </div>\n            <div class="form__item">\n              <label for="name" class="form__label visually-hidden">Имя</label>\n              <input class="form__input" type="text" id="name" name="first_name" placeholder="Имя*" required />\n            </div>\n            <div class="form__item">\n              <label for="middle-name" class="form__label visually-hidden">Отчество</label>\n              <input class="form__input" type="text" id="middle-name" name="patronymic" placeholder="Отчество*" required />\n            </div>\n\n            <div class="form__item form__item--agreement">\n              <input type="checkbox" class="form__checkbox" id="agreement" required />\n              <label for="agreement" class="form__label">Нажимая на кнопку, вы даете согласие на обработку своих персональных данных и соглашаетесь с <a href="http://miretno.ru/privacy/" target="_blank">Политикой конфиденциальности</a></label>\n            </div>\n\n            <div class="form__submit-wrapper">\n              <button class="form__submit" disabled>Сохранить результат</button>\n            </div>\n          </form>\n        </div>\n      </div>'}}]),n}();t.a=o},function(e,t,n){var s={1:"radio",2:"checkbox",3:"matching",4:"text"};t.a=function(e){var t=e.response,n=t.question_list,r=t.time,i=t.topics,o=[];return n.forEach(function(e){o.push({id:e.id,type:s[e.type],task:e.question,image:e.image,answers:e.answer_list,topic:"Тема "+e.topic+". "+i[e.topic]})}),{questionsData:o,timeData:r}}},function(e,t,n){var o=n(29),r=function(){function i(e){var t=e.text,n=e.score,r=e.link;_classCallCheck(this,i),this._view=new o.a({text:t,score:n,link:r})}return _createClass(i,[{key:"element",get:function(){return this._view.element}}]),i}();t.a=r},function(e,t,n){var r=n(0),i=n(3),o=function(e){function o(e){var t=e.text,n=e.score,r=e.link;_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i._text=t,i._score=n,i._link=r,i}return _inherits(o,r["a"]),_createClass(o,[{key:"bind",value:function(){this._element.querySelector(".end__certificate").onclick=function(){}}},{key:"template",get:function(){return'\n      <div class="container">\n        <div class="end">\n          <div class="end__wrapper">\n            <div class="decoration"></div>\n            <div class="logo">\n              <a href="http://miretno.ru/" class="logo__link" target="_blank">\n                <svg class="logo__img" width="148" height="144" aria-label="Логотип" role="img">\n                  <use xlink:href="#logo"/>\n                </svg>\n              </a>\n            </div>\n\n            <p class="end__header">'+this._text+'</p>\n\n            <p class="end__score">Вы набрали '+this._score+" "+Object(i.b)(this._score,["балл","балла","баллов"])+' из 100.</p>\n\n            <div class="end__certificate-wrapper">\n              <a href="'+this._link.output+'" class="end__certificate" target="_blank">Скачать сертификат участника</a>\n            </div>\n          </div>\n        </div>\n      </div>'}}]),o}();t.a=o},function(e,t,n){var r=function(){function n(e,t){_classCallCheck(this,n),this._questions=e,this._state={answers:{},time:t||2700}}return _createClass(n,[{key:"setAnswer",value:function(e,t){var n=this._questions[t]?this._questions[t].id:-1;this._state.answers[n]=e}},{key:"getQuestion",value:function(e){return this._questions[e]}},{key:"isComplete",value:function(){return Object.keys(this._state.answers).length===this._questions.length}},{key:"getNextQuestion",value:function(e){for(var t=e;t<this._questions.length;){if(!this._state.answers[this._questions[t].id])return t;t++}for(t=0;t<e;t++)if(!this._state.answers[this._questions[t].id])return t;return null}},{key:"getPrevQuestion",value:function(e){for(var t=e;0<=t;t--)if(!this._state.answers[this._questions[t].id])return t;for(var n=this._questions.length-1;e<n;n--)if(!this._state.answers[this._questions[n].id])return n;return null}},{key:"time",set:function(e){this._state.time=e},get:function(){return this._state.time}},{key:"answers",get:function(){for(var e=[],t=0;t<this._questions.length;t++){var n=this._questions[t].id;e.push(this._state.answers[n]?this._state.answers[n]:-1)}return e}}]),n}();t.a=r}]);